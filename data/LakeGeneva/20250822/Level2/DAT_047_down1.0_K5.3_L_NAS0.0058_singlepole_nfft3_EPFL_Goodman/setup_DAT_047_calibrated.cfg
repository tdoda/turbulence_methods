; Standard configuration setup.cfg file for a downward profiling VMP.
; Change the vehicle type in the [instrument_info] section to rvmp for an
;  uprising profiler.
; Created by RSI, 2015-12-17
; Modified by AB at RSI with coefficients for EPFL   2019-12-12
; Edited pressure coeff 0 by subtracting 0.39 to zero the reading at RSI 2019-12-12
; sensors shear and temperature have nominal values input in the setup file.
; Edited on 2021-06-08 by Sebastiano Piccolroaz
; instrument configured with 2 sh (instead of 1 sh and 1 uC)
; Edited on 2021-11-04 by Oscar Sepulveda Steiner (OSS) -- added sensitivity foz available shear sensor

; Any line that starts with a semicolon, ";", is a comment and is ignored by 
;  software. Likewise, everything to the right of a semicolon is ignored.
;  Use this feature to leave notes and to indicate that you have made changes 
;  to this file. Indicate the date (YYYY-MM-DD), your name and a brief 
;  description of your changes.

; The first section is the [root] section. It determines the data 
;  acquisition parameters. It does not need to be declared explicitly.

rate        = 512    ; the sampling rate of "fast" channels
prefix      = DAT_   ; the base name of your data files. A 3-digit file number is 
					 ; appended to this base name. The limit is 8 characters
                     ; total for internally recording instruments.
disk        = /data  ; the directory for the data files. It must exist. The directory 
					 ; should be /data for internally recording instruments. For 
					 ; real-time instruments it is best to leave this blank, so 
					 ; that it defaults to the local directory.
recsize     = 1      ; the size of a record in seconds
man_com_rate= 3      ; the communication rate for real-time VMPs. This value must
                     ; match the jumper settings of the RSTRANS in your VMP. 
                     ; It is not needed for internally recording instruments.
no-fast     = 8      ; number of fast "columns" in the address matrix (see below).
no-slow     = 2      ; number of slow "columns" in the address matrix.

; -----------------
;This section presents the address [matrix] of your instrument and 
;  automatically ends the [root] section above. The first columns are "slow"
;  channels as defined by the "no-slow" parameter in the [root] section.
;  The remainder are "fast" columns ("no-fast").
[matrix]
num_rows=8
row01   =	255	0	1	2	5	7	8	9	52	53	
row02   =	32	40	1	2	5	7	8	9	52	53	
row03   =	41	42	1	2	5	7	8	9	52	53	
row04   =	4	6	1	2	5	7	8	9	52	53	
row05   =	10	11	1	2	5	7	8	9	52	53	
row06   =	12	48	1	2	5	7	8	9	52	53	
row07   =	0	49	1	2	5	7	8	9	52	53	
row08   =	0	50	1	2	5	7	8	9	52	53	

; --------------------
;This section identifies your instrument. Only the vehicle is important.
[instrument_info]
vehicle = vmp      ; downward profiling. Use either vmp or rvmp but not both.
;vehicle= rvmp     ; upward profiling
model   = Micro-CTD  ; The actual model. Used for trouble shooting.
sn      = 310     ; The serial numnber of the instrument. For trouble shooting

; --------------------
; The next section is optional and can be expanded. Do not use the parameter "id = ".
[cruise_info]
operator    = EAWAG
project     = 
ship        =
leg         =

; --------------------
; Next come the [channel] sections. These are used to convert your data 
;  into physical units, and to save them into a mat-file. 
;  They also determine the name given to various signals 
;  in your data file. Please, stick to the convention of 
;  RSI because data visualization using the RSI Matlab Library of functions
;  assumes particular names. However, data will be converted into physical
;  units regardless of the name of the channels. If you change the names,
;  then data visualization and further processing is your responsibility.
;  A list of typical channel addresses (id) and their names and functions
;  is at the end of this file.

; Each channel section consists of a part that is unique to your instrument.
;  It does not need to be changed. The second part is dependent on your 
;  sensors (shear probes, FP07 thermistors, etc.) and must be updated 
;  whenever you change a probe.
;
; The record average value is display for some channels with a real-time
;  instrument. Display can be forced or suppressed using 
;  display = true, or display = false. Internally recording instruments
;  have no display. The units used for display can be specified with
;  units = [unit_symbols]. Keep it short for best display. 

; The ground reference channel.
[channel]
; instrument dependent parameters
id      = 0   ; the channel address, 0 to 254.  Listed in the [matrix] section.
name    = Gnd ; the name it will have in the mat-file.
type    = gnd ; the algorithm used to convert raw data into physical units.
;coef0   = 0   ; the coefficients required for conversion. None in this case.

; --------------
; The piezo-vibration sensors
[channel]
; instrument dependent parameters
id      = 1
name    = Ax
type    = piezo

[channel]
; instrument dependent parameters
id      = 2
name    = Ay
type    = piezo

; -----------------
; The thermistor channels
; without pre-emphasis
[channel]
; instrument dependent parameters
id          = 4
name        = T1
type        = therm
adc_fs      = 4.096
adc_bits    = 16
a           = -0.7
b           = 0.99908
G           = 6.0
E_B         = 0.68184
; sensor dependent parameters
SN          = T
beta_1      = 3154.343172
beta_2      = 36781.038430
T_0      = 291.268439
cal_date    =
units       = [C]

; with pre-emphasis
[channel]
; instrument dependent parameter
id          = 5
name        = T1_dT1
type        = therm
diff_gain   = 0.929

; without pre-emphasis
[channel]
id      = 6
name    = T2
type    = therm
; instrument dependent parameters
adc_fs  = 4.096
adc_bits= 16
a       =-3.9
b       = 0.99878
G       = 6.0
E_B     = 0.68182
; sensor dependent parameters. To be changed by user.
SN      = T
beta_1      = 3066.013376
beta_2      = 36729.466999
T_0      = 289.254585
cal_date= 
; units = [C]

; with pre-emphasis
[channel]
id          = 7
name        = T2_dT2
type        = therm
diff_gain   = 0.927

; -----------------
; The shear probe channels
[channel]
; instrument dependent parameters
id          = 8 
name        = sh1
type        = shear
adc_fs      = 4.096
adc_bits    = 16
diff_gain   = 0.949
; sensor dependent parameters -- updated OSS
sens        = 0.0886
SN          = M1731
cal_date    = 2020-04-08

; -----------------
; The shear probe channels
[channel]
; instrument dependent parameters
id          = 9 
name        = sh2
type        = shear
adc_fs      = 4.096
adc_bits    = 16
diff_gain   = 0.950
; sensor dependent parameters -- updated OSS
sens        = 0.0603 
SN          = M1973
cal_date    = 2020-04-08

; -----------------
; The pressure transducer
; without pre-emphasis
[channel]
; instrument dependent parameters
id          = 10
name        = P
type        = poly
; sensor dependent parameters
coef0       = 0.1896981     ;offset reading to zero. 0.5796981(coef0) - 0.39(p.ch. reading)= 0.1896981
coef1       = 0.0064698
coef2       = 0
cal_date    = 
units       = [dBar]

; with pre-emphasis
[channel]
; instrument dependent parameters
id          = 11
name        = P_dP
type        = poly
diff_gain   = 20.60

; pressure transducer voltage
[channel]
; instrument dependent parameters
id      = 12
name    = PV
type    = poly
coef0   = 4.096
coef1   = 1.25e-4
units   = [V]

; -----------------
; Battery voltage or power supply voltage
[channel]
; instrument dependent parameters
id          = 32
name        = V_Bat
type        = voltage
G           = 0.1
adc_fs      = 4.096
adc_bits    = 16
units       = [V]

; -----------------
; The ADIS precision inclinometer with built in thermometer
[channel]
; instrument dependent parameters
id      = 40
name    = Incl_Y
type    = inclxy
; sensor dependent parameters
coef0   = 0
coef1   = 0.025
units   = [deg]

[channel]
; instrument dependent parameters
id      = 41
name    = Incl_X
type    = inclxy
; sensor dependent parameters
coef0   = 0
coef1   = -0.025
units   = [deg]

[channel]
; instrument dependent parameters
id      = 42
name    = Incl_T
type    = inclt
; sensor dependent parameters
coef0   = 624
coef1   =-0.47
units   = [C]

; -----------------
; the JAC CT. Remove, if you are using a Sea-Bird CT,and 
;  remember to update the [matrix] section.
[channel]
; instrument dependent parameters
id          = 48, 49
name        = JAC_C
type        = jac_c
; sensor dependent parameters
a           = 3.593879e-2
b           = 3.708835e1
c           = 1.828244e-3
SN          = 49
cal_date    = 2018-04-17
units       = [mS/cm]

; the JAC CT. Remove, if you are using a Sea-Bird CT,and 
;  remember to update the [matrix] section.
[channel]
; instrument dependent parameters
id          = 50
name        = JAC_T
type        = jac_t
; sensor dependent parameters
a           =-7.281294e0
b           = 1.132118e-3
c           =-1.274389e-8
d           = 2.864819e-13
e           =-3.326410e-18
f           = 2.429658e-23
SN          = 49
cal_date    = 2018-04-17
units       = [C]

; --------------------------
; JAC fluorometer and backscatter sensor
; Remove if not installed
[channel]
; instrument dependent parameters
id          = 52
name        = Chlorophyll
type        = poly
sign        = unsigned
; sensor dependent parameters
coef0       = -9.891211e0
coef1       = 7.850167e-3
units       = [ppb]
SN          = 29
cal_date    = 2018-03-22

[channel]
; instrument dependent parameters
id          = 53
name        = Turbidity
type        = poly
sign        = unsigned
; sensor dependent parameters
coef0       = -2.014279e1
coef1       =  1.498375e-2
coef2       =  7.830090e-8
coef3       = -3.005514e-14
units       = [FTU]
SN          = 29
cal_date    = 2018-03-22

; -------------------------
; the micro-conductivity sensor. Remove if not installed
; first, without pre-emphasis
[channel]
; instrument dependent parameters
; id          = 64
; name        = C1
; type        = ucond
; a           =-0.7648
; b           = 112.9
; adc_fs      = 4.096
; adc_bits    = 16
; sensor dependent parameters
; SN          = 
; K           = 1.03e-3 ; the cell constant
; cal_date    =
; units       = [mS/cm]
;
; with pre-emphasis
[channel]
; instrument dependent parameters
; id          = 65
; name        = C1_dC1
; type        = ucond
; diff_gain   = 0.3973
; units       = [mS/cm]
;
; ------------------
; This is a list of typical channels (addresses) and their signals
; Only some of these channels will be in any particular instrument
;  id    Name    - rate - Description
; -------------------------------------------------------------------
;  0     Gnd     - slow - Reference ground
;  1     Ax      - fast - horizontal acceleration in the direction of the pressure port or ON/OFF magnet
;  2     Ay      - fast - horizontal acceleration orthogonal to the direction of the pressure port
;  4     T1      - slow - Temperature from Thermistor 1 without pre-emphasis
;  5     T1_dT1  - fast - Temperature from Thermistor 1 with pre-emphasis
;  6     T2      - slow - Temperature from Thermistor 2 without pre-emphasis
;  7     T2_dT2  - fast - Temperature from Thermistor 2 with pre-emphasis
;  8     sh1     - fast - velocity derivative from shear probe 1
;  9     sh2     - fast - velocity derivative from shear probe 2
; 10     P       - slow - pressure signal without pre-emphasis
; 11     P_dP    - slow - pressure signal with pre-emphasis
; 12     PV      - slow - voltage on pressure transducer
; 32     V_Bat   - slow - Battery or power supply voltage
; 40     Incl_Y  - slow - Inclinometer, rotation around the y-axis
; 41     Incl_X  - slow - Inclinometer, rotation around the x-axis
; 42     Incl_T  - slow - Inclinometer, its temperature 
; 48, 49 JAC_C   - slow - JAC conductivity sensor
; 50     JAC_T   - slow - JAC thermometer
; 52     Chlorophyll - fast - JAC fluorometer
; 53     Turbidity   - fast - JAC backscatter sensor
; 64     C1      - fast - micro-conductivity without pre-emphasis
; 65     C1_dC1  - fast - micro-conductivity with pre-emphasis
; 255    sp_char - slow - special Character that always returns 32752D or 7FF0H and 
;                         is used to test the integrity of communication.

; End of setup configuration file.



